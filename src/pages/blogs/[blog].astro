---
import DynamicMD from "@components/DynamicMD/DynamicMD";
import { listRepositoryIssuesFromOwnerAndRepo, getRepositoryIssueFromIssueId } from "@utils/request/github";
import Layout from "@layouts/Layout.astro";
export const getStaticPaths = async () => {
    const issues = await listRepositoryIssuesFromOwnerAndRepo('yuhang-dong', 'github-page')
    return issues?.map(issue => ({
        params: {
            blog: String(issue.number)
        }
    }));
}


const { blog } = Astro.params
const issue = await getRepositoryIssueFromIssueId(blog!)
---

<Layout title={issue?.title}>
    <DynamicMD originNote={issue?.body} issueUrl={`https://api.github.com/repos/yuhang-dong/github-page/issues/${issue?.number || 0}`} client:load commentsUrl={`https://api.github.com/repos/yuhang-dong/github-page/issues/${issue?.number || 0}/comments`}/>
</Layout>